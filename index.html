<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Despierta tu Voz - Mentor Vocal</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="logo-appDTV2.png">

</head>

<body>
    <div id="authOverlay" class="overlay">
        <div class="auth-card">
            <h2>Despierta tu Voz</h2>
            <p>Introduce tus datos para hablar con el Mentor</p>

            <input type="text" id="authName" placeholder="Tu nombre para el Mentor (solo la 1a vez)">
            <input type="email" id="authEmail" placeholder="Tu correo electr√≥nico">
            <input type="password" id="authPassword" placeholder="Tu contrase√±a">

            <div class="auth-buttons">
                <button id="loginBtn">Entrar</button>
                <button id="signUpBtn" class="secondary">Registrarme</button>
            </div>
            <div class="auth-extra">
                <a href="#" id="forgotPasswordLink">¬øHas olvidado tu contrase√±a?</a>
            </div>

            <!-- Secci√≥n oculta para resetear contrase√±a -->
            <div id="resetPasswordContainer">
                <p>Introduce tu nueva contrase√±a:</p>
                <input type="password" id="newPassword" placeholder="Nueva contrase√±a">
                <button id="updatePasswordBtn">Actualizar Contrase√±a</button>
            </div>

            <p id="authError" class="error-msg"></p>
        </div>
    </div>

    <header>
        <div class="header-main">
            <img src="logo-appDTV2.png" alt="Despierta tu Voz Logo" class="app-logo">
            <h2>Despierta tu Voz</h2>
        </div>
        <p>Conexi√≥n emocional y t√©cnica 24/7</p>
    </header>

    <div class="chat-container">
        <div class="chat-header">
            <div class="chat-header-top">
                <span>Sesi√≥n con el Mentor</span>
                <div class="header-top-actions">
                    <button id="logoutBtn" class="logout-btn" title="Cerrar Sesi√≥n">SALIR</button>
                    <button id="mainHelpBtn" class="help-modulo-btn">?</button>
                </div>
            </div>
            <div id="mainHelpTooltip" class="help-tooltip">
                <h5>üí° Gu√≠a de la Pantalla Principal</h5>
                <div class="help-item">
                    <span class="help-btn-tag"><img src="assets/icon_bienvenida.png" alt="Icono Bienvenida"></span>
                    <div class="help-desc"><strong>Bienvenida</strong> ‚Äì Te da la oportunidad de volver a leer el
                        mensaje inicial de Bienvenida.</div>
                </div>
                <div class="help-item">
                    <span class="help-btn-tag"><img src="assets/icon_viaje.png" alt="Icono Mi Viaje"></span>
                    <div class="help-desc"><strong>Mi Viaje</strong> ‚Äì Acceso a tu ruta de autoconocimiento dividida en
                        5 M√≥dulos.</div>
                </div>
                <div class="help-item">
                    <span class="help-btn-tag"><img src="assets/icon_progreso.png" alt="Icono Mi Progreso"></span>
                    <div class="help-desc"><strong>Mi Progreso</strong> ‚Äì Aqu√≠ el Mentor registra tus logros y evoluci√≥n
                        emocional.</div>
                </div>
                <div class="help-item">
                    <span class="help-btn-tag"><img src="assets/icon_emergencia.png" alt="Icono Emergencia"></span>
                    <div class="help-desc"><strong>Emergencia</strong> ‚Äì Pulsa aqu√≠ si te sientes nervioso antes de
                        cantar para recibir pautas inmediatas.</div>
                </div>
                <div class="help-item">
                    <span class="help-btn-tag"><img src="assets/icon_sesiones.png" alt="Icono Sesiones"></span>
                    <div class="help-desc"><strong>Sesiones 1/1</strong> ‚Äì Informaci√≥n sobre tus tutor√≠as personales y
                        reserva de espacio.</div>
                </div>
                <div class="help-item">
                    <span class="help-btn-tag"><img src="assets/icon_upgrade.png" alt="Icono Mejorar Plan"></span>
                    <div class="help-desc"><strong>Mejorar Plan</strong> ‚Äì Sube de nivel para desbloquear m√°s funciones
                        y soporte del Mentor.</div>
                </div>
                <div class="help-item">
                    <span class="help-btn-tag"><img src="assets/icon_ajustes.png" alt="Icono Ajustes"></span>
                    <div class="help-desc"><strong>Ajustes</strong> ‚Äì Personaliza el idioma, personalidad del Mentor y
                        tus objetivos semanales.</div>
                </div>
                <div class="help-item">
                    <span class="help-btn-tag">
                        <div class="logout-tag">SALIR</div>
                    </span>
                    <div class="help-desc"><strong>MUY IMPORTANTE</strong>. Haz clic aqu√≠ para cerrar tu sesi√≥n y
                        asegurar que se guarden todos los datos de la conversaci√≥n.</div>
                </div>
                <div class="help-item">
                    <span class="help-btn-tag">
                        <div class="text-tag">Caja</div>
                    </span>
                    <div class="help-desc"><strong>Caja de texto</strong> ‚Äì Pregunta al Mentor tus dudas sobre t√©cnica,
                        partituras o emociones.</div>
                </div>
                <div class="help-item">
                    <span class="help-btn-tag">
                        <div class="mic-tag">üé§</div>
                    </span>
                    <div class="help-desc"><strong>Micr√≥fono</strong> ‚Äì Pulsa para hablar en lugar de escribir (el
                        Mentor transcribir√° tus palabras).</div>
                </div>
            </div>
            <div class="header-buttons">
                <button id="bienvenidaBtn" class="icon-nav-btn" title="Bienvenida">
                    <img src="assets/icon_bienvenida.png" alt="Bienvenida">
                </button>
                <button id="viajeBtn" class="journey-btn icon-nav-btn" title="Mi Viaje">
                    <img src="assets/icon_viaje.png" alt="Mi Viaje">
                </button>
                <button id="progresoBtn" class="icon-nav-btn" title="Mi Progreso">
                    <img src="assets/icon_progreso.png" alt="Mi Progreso">
                </button>
                <button id="botiquinBtn" class="icon-nav-btn" title="Emergencias">
                    <img src="assets/icon_emergencia.png" alt="Emergencias">
                </button>
                <button id="sesionBtn" class="premium-btn icon-nav-btn" title="Sesiones 1/1">
                    <img src="assets/icon_sesiones.png" alt="Sesiones">
                </button>
                <button id="upgradeBtn" class="upgrade-btn icon-nav-btn" title="Mejorar Plan">
                    <img src="assets/icon_upgrade.png" alt="Mejorar Plan">
                </button>
                <button id="ajustesBtn" class="icon-nav-btn" title="Ajustes">
                    <img src="assets/icon_ajustes.png" alt="Ajustes">
                </button>
            </div>
        </div>
        <div class="messages" id="chatBox"></div>
        <div class="input-area">
            <input type="text" id="chatMentoriaInput" placeholder="Escribe aqu√≠ tu sentir o tu canci√≥n..."
                autocomplete="off" spellcheck="false">
            <button id="sendBtn">‚ñ∂</button>
            <button id="micBtn">üé§</button>
        </div>
    </div>
    <div id="diarioModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div id="diarioContent"></div>
        </div>
    </div>
    <!-- Modal para Sesiones 1/1 (Premium) -->
    <div id="sesionModal" class="modal">
        <div class="modal-content sesion-modal-content">
            <span class="close-modal close-sesion">&times;</span>
            <h2>Mis Sesiones 1/1</h2>
            <div id="sessionQuotaInfo" class="session-quota-info">
                <!-- Se poblar√° con los minutos restantes -->
            </div>

            <div class="session-actions">
                <div class="session-group">
                    <h3>Sesiones Incluidas</h3>
                    <p class="session-desc">Dispones de 60 min mensuales (1 de 1h o 2 de 30min).</p>
                    <div class="booking-options">
                        <button id="book30Btn" class="btn-booking">Reservar 30 min</button>
                        <button id="book60Btn" class="btn-booking">Reservar 1 hora</button>
                    </div>
                </div>

                <div class="session-group extra">
                    <h3>Sesiones Extras</h3>
                    <p class="session-desc">¬øNecesitas m√°s tiempo? Reserva una sesi√≥n adicional.</p>
                    <div class="booking-options">
                        <button id="buyExtra30Btn" class="btn-booking btn-extra">Comprar Extra 30 min</button>
                        <button id="buyExtra60Btn" class="btn-booking btn-extra">Comprar Extra 1 hora</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal para elegir Plan (Upgrade) -->
    <div id="upgradeModal" class="modal">
        <div class="modal-content upgrade-modal-content">
            <span class="close-modal close-upgrade">&times;</span>
            <h2>Mejora tu Experiencia</h2>
            <p>Elige el plan que mejor se adapte a tu viaje vocal.</p>
            <div class="upgrade-options">
                <div class="upgrade-card pro">
                    <h3>Plan PRO</h3>
                    <p>Chat ilimitado y memoria relacional profunda.</p>
                    <button onclick="iniciarPago('pro')" class="btn-upgrade">Elegir Pro</button>
                </div>
                <div class="upgrade-card premium">
                    <h3>Plan TRANSFORMA</h3>
                    <p>Todo el PRO + Sesiones 1/1 y Plan a medida.</p>
                    <button onclick="iniciarPago('premium')" class="btn-upgrade">Elegir Transforma</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Mi Viaje (Roadmap) -->
    <div id="viajeModal" class="modal journey-modal">
        <div class="modal-content journey-content">
            <span class="close-modal close-viaje">&times;</span>
            <div class="journey-header">
                <h2>El viaje de mi vida</h2>
                <p>Vamos all√° con tu Viaje de Vida personal. Cada paso de este mapa, cada m√≥dulo, es una llave para
                    abrir un cerrojo de tu voz. Respira, conf√≠a y comienza a transformar tu historia.</p>
            </div>
            <div id="journeyRoadmap" class="roadmap-container">
                <!-- Se poblar√° din√°micamente desde mi_viaje/main.js -->
            </div>
        </div>
    </div>

    <!-- Modal de M√≥dulo de Coaching -->
    <div id="moduloModal" class="modal module-modal">
        <div class="modal-content module-content">
            <span class="close-modal close-modulo">&times;</span>
            <div id="moduloContainer">
                <div id="questionContainer"></div>
                <div class="module-navigation">
                    <button id="prevQBtn" class="nav-btn">Anterior</button>
                    <button id="nextQBtn" class="nav-btn">Siguiente</button>
                    <button id="finishModuleBtn" class="nav-btn finish-btn">Finalizar
                        M√≥dulo</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal de Ajustes -->
    <div id="settingsModal" class="modal">
        <div class="modal-content settings-modal-content">
            <span class="close-modal close-settings">&times;</span>
            <h2>Ajustes</h2>

            <div class="settings-section profile-info">
                <div id="settingsUserName" class="info-value">...</div>
                <div id="settingsUserTier" class="info-value">...</div>
            </div>

            <div class="settings-section">
                <h3>Respuesta del Mentor</h3>
                <div class="slider-group">
                    <div class="slider-labels">
                        <span>üß¨ T√©cnico</span>
                        <span>Enfoque</span>
                        <span>üïØÔ∏è Emocional</span>
                    </div>
                    <input type="range" id="focusSlider" min="0" max="1" step="0.1" value="0.5"
                        title="Enfoque del Mentor" placeholder="0.5">
                </div>
                <div class="slider-group">
                    <div class="slider-labels">
                        <span>üßò Neutro</span>
                        <span>Personalidad</span>
                        <span>üî• Motivador</span>
                    </div>
                    <input type="range" id="personalitySlider" min="0" max="1" step="0.1" value="0.5"
                        title="Personalidad del Mentor" placeholder="0.5">
                </div>
                <div class="slider-group">
                    <div class="slider-labels">
                        <span>‚ö° Breve/Directo</span>
                        <span>Extensi√≥n</span>
                        <span>üìú Detallado/Profundo</span>
                    </div>
                    <input type="range" id="lengthSlider" min="0" max="1" step="0.1" value="0.5"
                        title="Extensi√≥n de las respuestas" placeholder="0.5">
                </div>
            </div>

            <div class="settings-section">
                <h3>Preferencias</h3>
                <div class="setting-item">
                    <label for="languageSelect">Idioma del Mentor:</label>
                    <select id="languageSelect">
                        <option value="es">Espa√±ol</option>
                        <option value="en">English</option>
                        <option value="fr">Fran√ßais</option>
                        <option value="it">Italiano</option>
                        <option value="de">Deutsch</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="weeklyGoalInput">Objetivo Semanal:</label>
                    <textarea id="weeklyGoalInput"
                        placeholder="¬øEn qu√© te enfocas esta semana? (ej: Preparar mi audici√≥n)"></textarea>
                </div>
                <div class="setting-item">
                    <label for="notificationSelect">Notificaciones Proactivas:</label>
                    <select id="notificationSelect">
                        <option value="off">OFF</option>
                        <option value="daily">Diarias</option>
                        <option value="weekly">Semanales</option>
                        <option value="important">Solo importantes</option>
                    </select>
                </div>
            </div>

            <div class="settings-actions">
                <button id="clearHistoryBtn" class="danger-btn">Borrar Historial de Chat</button>
                <button id="saveSettingsBtn" class="save-btn">Guardar Cambios</button>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="js/stripe-checkout.js"></script>
    <script type="module" src="main.js?v=5.3"></script>
</body>


</html>