<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Despierta tu Voz - Mentor Vocal</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="logo-appDTV2.png">

</head>

<body>
    <div id="authOverlay" class="overlay">
        <div class="auth-card">
            <h2>Despierta tu Voz</h2>
            <p>Introduce tus datos para hablar con el Mentor</p>

            <input type="text" id="authName" placeholder="Tu nombre para el Mentor (solo la 1a vez)">
            <input type="email" id="authEmail" placeholder="Tu correo electr√≥nico">
            <input type="password" id="authPassword" placeholder="Tu contrase√±a">

            <div class="auth-buttons">
                <button id="loginBtn">Entrar</button>
                <button id="signUpBtn" class="secondary">Registrarme</button>
            </div>
            <div class="auth-extra">
                <a href="#" id="forgotPasswordLink">¬øHas olvidado tu contrase√±a?</a>
            </div>

            <!-- Secci√≥n oculta para resetear contrase√±a -->
            <div id="resetPasswordContainer">
                <p>Introduce tu nueva contrase√±a:</p>
                <input type="password" id="newPassword" placeholder="Nueva contrase√±a">
                <button id="updatePasswordBtn">Actualizar Contrase√±a</button>
            </div>

            <p id="authError" class="error-msg"></p>
        </div>
    </div>

    <header>
        <div class="header-main">
            <img src="logo-appDTV2.png" alt="Despierta tu Voz Logo" class="app-logo">
            <h1>Despierta tu Voz</h1>
        </div>
        <p>Conexi√≥n emocional y t√©cnica 24/7</p>
    </header>

    <div class="chat-container">
        <div class="chat-header">
            <div class="chat-header-top">
                <span>Sesi√≥n con el Mentor</span>
                <button id="mainHelpBtn" class="help-modulo-btn">?</button>
            </div>
            <div id="mainHelpTooltip" class="help-tooltip">
                <h5>üí° Gu√≠a de la Pantalla Principal</h5>
                <p><span class="help-btn-tag">Bienvenida</span> ‚Äì Te da la oportunidad de volver a leer el mensaje
                    inicial de Bienvenida. Como en el resto de sesiones no aparece, te doy la oportunidad de verlo de
                    nuevo.</p>
                <p><span class="help-btn-tag">Mi Viaje</span> - Es el acceso al Viaje de tu vida, esa ruta de
                    autoconocimiento dividida en 5 M√≥dulos donde ir√°s desvelando tus secretos emocionales poco a poco y
                    que te har√° descubrir qu√© otros secretos guardas en tu inconsciente.</p>
                <p><span class="help-btn-tag">Mi Progreso diario</span> ‚Äì Aqu√≠ ver√°s el progreso que el Mentor va
                    registrando conforme vas interactuando con √©l. Cada logro, cada preocupaci√≥n, alegr√≠a o miedo se ir√°
                    registrando, as√≠ el Mentor te podr√° responder de una manera m√°s personalizada a cada consulta que
                    hagas.</p>
                <p><span class="help-btn-tag">Emergencia</span> ‚Äì Si tienes una audici√≥n o concierto y te sientes muy
                    nervioso, con sensaciones nada agradables para ti, aprieta este bot√≥n que te dar√° unas pautas
                    personalizadas para que puedas salir de esa situaci√≥n.</p>
                <p><span class="help-btn-tag">Cerrar Sesi√≥n</span> ‚Äì <strong>MUY IMPORTANTE</strong>. Cada vez que te
                    despidas de tu mentor, has de cerrar sesi√≥n para que se guarden los datos de la conversaci√≥n. As√≠ el
                    mentor podr√° acceder a ellas y tenerlas en cuenta en futuras conversaciones.</p>
                <p><span class="help-btn-tag">Caja de texto</span> ‚Äì Aqu√≠ pregunta al Mentor lo que quieras, tus
                    preocupaciones, tus dudas, tus inquietudes acerca de cualquier partitura. Plant√©ale una obra y √©l la
                    buscar√° y la relacionar√° contigo o te har√° preguntas para realizar un trabajo m√°s profundo y
                    personal. Incluso puedes preguntarle por lo √∫ltimo que visteis en la anterior sesi√≥n, cu√°les cree
                    que ha sido tus logros, recomendaciones, etc.</p>
                <p><span class="help-btn-tag">üé§ Micr√≥fono</span> ‚Äì Si en vez de escribir te viene mejor hablar, el
                    Mentor te escucha, escribir√° lo que t√∫ digas en la caja de texto. Por ahora no escucha c√≥mo cantas.
                    Pero dale tiempo...con el progreso de la tecnolog√≠a todo puede llegar a ser posible...</p>
            </div>
            <div class="header-buttons">
                <button id="bienvenidaBtn">Bienvenida</button>
                <button id="viajeBtn" class="journey-btn">Mi Viaje</button>
                <button id="progresoBtn">Mi Progreso</button>
                <button id="botiquinBtn" title="Botiqu√≠n">Emergencia</button>
                <button id="sesionBtn" class="premium-btn">Sesiones 1/1</button>
                <button id="upgradeBtn" class="upgrade-btn">Mejorar Plan</button>
                <button id="ajustesBtn">Ajustes</button>
                <button id="logoutBtn">Cerrar Sesi√≥n</button>
            </div>
        </div>
        <div class="messages" id="chatBox"></div>
        <div class="input-area">
            <input type="text" id="chatMentoriaInput" placeholder="Escribe aqu√≠ tu sentir o tu canci√≥n..."
                autocomplete="off" spellcheck="false">
            <button id="sendBtn">‚ñ∂</button>
            <button id="micBtn">üé§</button>
        </div>
    </div>
    <div id="diarioModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div id="diarioContent"></div>
        </div>
    </div>
    <!-- Modal para Sesiones 1/1 (Premium) -->
    <div id="sesionModal" class="modal">
        <div class="modal-content sesion-modal-content">
            <span class="close-modal close-sesion">&times;</span>
            <h2>Mis Sesiones 1/1</h2>
            <div id="sessionQuotaInfo" class="session-quota-info">
                <!-- Se poblar√° con los minutos restantes -->
            </div>

            <div class="session-actions">
                <div class="session-group">
                    <h3>Sesiones Incluidas</h3>
                    <p class="session-desc">Dispones de 60 min mensuales (1 de 1h o 2 de 30min).</p>
                    <div class="booking-options">
                        <button id="book30Btn" class="btn-booking">Reservar 30 min</button>
                        <button id="book60Btn" class="btn-booking">Reservar 1 hora</button>
                    </div>
                </div>

                <div class="session-group extra">
                    <h3>Sesiones Extras</h3>
                    <p class="session-desc">¬øNecesitas m√°s tiempo? Reserva una sesi√≥n adicional.</p>
                    <div class="booking-options">
                        <button id="buyExtra30Btn" class="btn-booking btn-extra">Comprar Extra 30 min</button>
                        <button id="buyExtra60Btn" class="btn-booking btn-extra">Comprar Extra 1 hora</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal para elegir Plan (Upgrade) -->
    <div id="upgradeModal" class="modal">
        <div class="modal-content upgrade-modal-content">
            <span class="close-modal close-upgrade">&times;</span>
            <h2>Mejora tu Experiencia</h2>
            <p>Elige el plan que mejor se adapte a tu viaje vocal.</p>
            <div class="upgrade-options">
                <div class="upgrade-card pro">
                    <h3>Plan PRO</h3>
                    <p>Chat ilimitado y memoria relacional profunda.</p>
                    <button onclick="iniciarPago('pro')" class="btn-upgrade">Elegir Pro</button>
                </div>
                <div class="upgrade-card premium">
                    <h3>Plan TRANSFORMA</h3>
                    <p>Todo el PRO + Sesiones 1/1 y Plan a medida.</p>
                    <button onclick="iniciarPago('premium')" class="btn-upgrade">Elegir Transforma</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Mi Viaje (Roadmap) -->
    <div id="viajeModal" class="modal journey-modal">
        <div class="modal-content journey-content">
            <span class="close-modal close-viaje">&times;</span>
            <div class="journey-header">
                <h2>El viaje de mi vida</h2>
                <p>Vamos all√° con tu Viaje de Vida personal. Cada paso de este mapa, cada m√≥dulo, es una llave para
                    abrir un cerrojo de tu voz. Respira, conf√≠a y comienza a transformar tu historia.</p>
            </div>
            <div id="journeyRoadmap" class="roadmap-container">
                <!-- Se poblar√° din√°micamente desde mi_viaje/main.js -->
            </div>
        </div>
    </div>

    <!-- Modal de M√≥dulo de Coaching -->
    <div id="moduloModal" class="modal module-modal">
        <div class="modal-content module-content">
            <span class="close-modal close-modulo">&times;</span>
            <div id="moduloContainer">
                <div id="questionContainer"></div>
                <div class="module-navigation">
                    <button id="prevQBtn" class="nav-btn">Anterior</button>
                    <button id="nextQBtn" class="nav-btn">Siguiente</button>
                    <button id="finishModuleBtn" class="nav-btn finish-btn">Finalizar
                        M√≥dulo</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal de Ajustes -->
    <div id="settingsModal" class="modal">
        <div class="modal-content settings-modal-content">
            <span class="close-modal close-settings">&times;</span>
            <h2>Ajustes</h2>

            <div class="settings-section profile-info">
                <div class="info-item">
                    <h3>Nombre</h3>
                    <div id="settingsUserName" class="info-value">...</div>
                </div>
                <div class="info-item">
                    <h3>Plan</h3>
                    <div id="settingsUserTier" class="info-value">...</div>
                </div>
            </div>

            <div class="settings-section">
                <h3>Respuesta del Mentor</h3>
                <div class="slider-group">
                    <div class="slider-labels">
                        <span>üß¨ T√©cnico</span>
                        <span>Enfoque</span>
                        <span>üïØÔ∏è Emocional</span>
                    </div>
                    <input type="range" id="focusSlider" min="0" max="1" step="0.1" value="0.5"
                        title="Enfoque del Mentor" placeholder="0.5">
                </div>
                <div class="slider-group">
                    <div class="slider-labels">
                        <span>üßò Neutro</span>
                        <span>Personalidad</span>
                        <span>üî• Motivador</span>
                    </div>
                    <input type="range" id="personalitySlider" min="0" max="1" step="0.1" value="0.5"
                        title="Personalidad del Mentor" placeholder="0.5">
                </div>
                <div class="slider-group">
                    <div class="slider-labels">
                        <span>‚ö° Breve/Directo</span>
                        <span>Extensi√≥n</span>
                        <span>üìú Detallado/Profundo</span>
                    </div>
                    <input type="range" id="lengthSlider" min="0" max="1" step="0.1" value="0.5"
                        title="Extensi√≥n de las respuestas" placeholder="0.5">
                </div>
            </div>

            <div class="settings-section">
                <h3>Preferencias</h3>
                <div class="setting-item">
                    <label for="languageSelect">Idioma del Mentor:</label>
                    <select id="languageSelect">
                        <option value="es">Espa√±ol</option>
                        <option value="en">English</option>
                        <option value="fr">Fran√ßais</option>
                        <option value="it">Italiano</option>
                        <option value="de">Deutsch</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="weeklyGoalInput">Objetivo Semanal:</label>
                    <textarea id="weeklyGoalInput"
                        placeholder="¬øEn qu√© te enfocas esta semana? (ej: Preparar mi audici√≥n)"></textarea>
                </div>
                <div class="setting-item">
                    <label for="notificationSelect">Notificaciones Proactivas:</label>
                    <select id="notificationSelect">
                        <option value="off">OFF</option>
                        <option value="daily">Diarias</option>
                        <option value="weekly">Semanales</option>
                        <option value="important">Solo importantes</option>
                    </select>
                </div>
            </div>

            <div class="settings-actions">
                <button id="clearHistoryBtn" class="danger-btn">Borrar Historial de Chat</button>
                <button id="saveSettingsBtn" class="save-btn">Guardar Cambios</button>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="js/stripe-checkout.js"></script>
    <script type="module" src="main.js?v=5.3"></script>
</body>


</html>